<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Oasis Maps</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', sans-serif;
        }

        html,
        body {
            width: 100%;
            height: 100%;
            overflow: hidden;
        }

        body {
            display: flex;
            background: #111;
            transition: background 0.5s;
        }

        #map {
            flex: 1;
            height: 100%;
        }

        .floating-panel {
            position: absolute;
            left: 20px;
            top: 20px;
            width: 360px;
            padding: 25px;
            border-radius: 25px;
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(20px) saturate(180%);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
            display: flex;
            flex-direction: column;
            gap: 15px;
            z-index: 1500;
            color: #111;
            transition: all 0.4s;
        }

        .floating-panel h2 {
            font-size: 28px;
            text-align: center;
            color: #111;
        }

        .input-group {
            display: flex;
            gap: 10px;
        }

        .input-group input {
            flex: 1;
            padding: 12px 15px;
            border: none;
            border-radius: 15px;
            background: rgba(255, 255, 255, 0.25);
            color: #111;
            outline: none;
            font-size: 16px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            transition: all 0.3s;
        }

        .input-group input::placeholder {
            color: #555;
        }

        .input-group button {
            padding: 12px 18px;
            border: none;
            border-radius: 15px;
            background: rgba(0, 0, 0, 0.1);
            color: #111;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }

        .input-group button:hover {
            background: rgba(0, 0, 0, 0.2);
            transform: scale(1.05);
        }

        .select-group {
            display: flex;
            gap: 10px;
        }

        .select-group select {
            flex: 1;
            padding: 12px 15px;
            border: none;
            border-radius: 15px;
            background: rgba(255, 255, 255, 0.25);
            color: #111;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }

        .glass-button {
            padding: 12px 18px;
            border-radius: 15px;
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(15px);
            color: #111;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .glass-button:hover {
            background: rgba(255, 255, 255, 0.35);
            transform: scale(1.05);
        }

        .route-info,
        .directions {
            padding: 12px;
            border-radius: 15px;
            background: rgba(255, 255, 255, 0.15);
            color: #111;
            max-height: 200px;
            overflow-y: auto;
            font-size: 14px;
            line-height: 1.5;
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.2);
        }

        .next-turn {
            position: absolute;
            bottom: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.25);
            backdrop-filter: blur(15px);
            padding: 15px 20px;
            border-radius: 20px;
            color: #111;
            font-weight: 600;
            font-size: 16px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
            max-width: 250px;
            z-index: 1500;
            transition: transform 0.4s ease;
        }

        .next-turn.hidden {
            transform: translateY(120px);
        }

        .ai-suggestions {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(15px);
            padding: 15px 20px;
            border-radius: 20px;
            color: #111;
            font-size: 14px;
            max-width: 250px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
            z-index: 1500;
        }

        .ai-suggestions h3 {
            font-size: 16px;
            font-weight: 600;
            text-align: center;
            margin-bottom: 8px;
        }

        .ai-suggestions ul {
            list-style: disc;
            padding-left: 20px;
            margin: 0;
        }

        .pulse-marker {
            width: 20px;
            height: 20px;
            background: #0ff;
            border-radius: 50%;
            border: 3px solid #fff;
            box-shadow: 0 0 15px #0ff;
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0% {
                transform: scale(1);
                opacity: 1
            }

            50% {
                transform: scale(1.6);
                opacity: 0.5
            }

            100% {
                transform: scale(1);
                opacity: 1
            }
        }

        @media(max-width:1024) {
            .floating-panel {
                width: 300px;
            }
        }

        @media(max-width:768) {
            .floating-panel {
                width: auto;
                left: 10px;
                top: 10px;
            }
        }
    </style>
</head>

<body>
    <div id="map"></div>

    <div class="floating-panel">
        <h2>Oasis Maps</h2>

        <div class="input-group">
            <input type="text" id="searchLocation" placeholder="Search Location">
            <button onclick="searchMap()" class="glass-button">Search</button>
        </div>

        <div class="input-group">
            <input type="text" id="location" placeholder="Start Location">
            <button onclick="setStart()" class="glass-button">Go</button>
        </div>

        <div class="input-group">
            <input type="text" id="destination" placeholder="Destination">
            <button onclick="setDestination()" class="glass-button">Go</button>
        </div>

        <div class="select-group">
            <select id="routeMode">
                <option value="driving">Driving</option>
                <option value="walking">Walking</option>
                <option value="cycling">Cycling</option>
            </select>
            <select id="roadOption">
                <option value="default">Fastest</option>
                <option value="avoid_motorway">Avoid Highways</option>
                <option value="avoid_toll">Avoid Tolls</option>
                <option value="avoid_motorway,toll">Avoid Both</option>
            </select>
        </div>

        <div style="display:flex;gap:10px;">
            <button onclick="goMode()" class="glass-button">Go Mode</button>
            <button onclick="goToCurrentLocation()" class="glass-button">My Location</button>
        </div>

        <div class="route-info" id="routeInfo"></div>
        <div class="directions" id="directions"></div>
    </div>

    <div class="next-turn hidden" id="nextTurn">Next turn info will appear here</div>

    <div class="ai-suggestions" id="aiSuggestions">
        <h3>Suggested Places</h3>
        <ul id="suggestionsList">
            <li>Enter destination to see suggestions</li>
        </ul>
    </div>

    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script>
        const map = L.map('map').setView([20.5937, 78.9629], 5);
        const lightLayer = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { maxZoom: 19, attribution: 'Â© OpenStreetMap' }).addTo(map);
        const satelliteLayer = L.tileLayer('https://{s}.google.com/vt/lyrs=s&x={x}&y={y}&z={z}', { maxZoom: 20, subdomains: ['mt0', 'mt1', 'mt2', 'mt3'] });
        L.control.layers({ Light: lightLayer, Satellite: satelliteLayer }).addTo(map);

        let marker, destinationMarker, currentLatLng, movingVehicle, routeCoords, nextTurnIndex = 0, animatedPolyline;

        async function fetchLocations(q) { const res = await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${q}`); return await res.json(); }
        function searchMap() { const q = document.getElementById('searchLocation').value; if (!q) return; fetchLocations(q).then(res => { if (res.length > 0) { const lat = parseFloat(res[0].lat), lng = parseFloat(res[0].lon); map.setView([lat, lng], 13); L.marker([lat, lng]).addTo(map).bindPopup(q).openPopup(); } }); }
        function setStart() { const q = document.getElementById('location').value; if (!q) return; fetchLocations(q).then(res => { if (res.length > 0) { const lat = parseFloat(res[0].lat), lng = parseFloat(res[0].lon); currentLatLng = [lat, lng]; map.setView(currentLatLng, 13); if (marker) map.removeLayer(marker); marker = L.marker(currentLatLng, { icon: L.icon({ iconUrl: 'https://cdn-icons-png.flaticon.com/512/64/64113.png', iconSize: [30, 30] }) }).addTo(map).bindPopup("Start: " + q).openPopup(); updateAISuggestions(); } }); }
        function setDestination() { const q = document.getElementById('destination').value; if (!q) return; fetchLocations(q).then(res => { if (res.length > 0) { const lat = parseFloat(res[0].lat), lng = parseFloat(res[0].lon); if (destinationMarker) map.removeLayer(destinationMarker); destinationMarker = L.marker([lat, lng], { icon: L.icon({ iconUrl: 'https://cdn-icons-png.flaticon.com/512/684/684908.png', iconSize: [30, 30] }) }).addTo(map).bindPopup("Destination: " + q).openPopup(); map.setView([lat, lng], 13); updateAISuggestions(); } }); }
        function goToCurrentLocation() { if (navigator.geolocation) { navigator.geolocation.getCurrentPosition(pos => { currentLatLng = [pos.coords.latitude, pos.coords.longitude]; if (marker) map.removeLayer(marker); marker = L.marker(currentLatLng, { icon: L.icon({ iconUrl: 'https://cdn-icons-png.flaticon.com/512/64/64113.png', iconSize: [30, 30] }) }).addTo(map).bindPopup("You are here").openPopup(); updateAISuggestions(); map.flyTo(currentLatLng, 15); }, err => alert("Geolocation not allowed")); } else alert("Geolocation not supported"); }
        function updateAISuggestions() { const list = document.getElementById('suggestionsList'); list.innerHTML = ''; if (destinationMarker) { list.innerHTML = '<li>Nearby Cafe</li><li>Gas Station</li><li>Restaurant</li><li>Park</li><li>Museum</li><li>Hotel</li><li>Shopping Mall</li><li>School</li><li>Hospital</li><li>Movie Theater</li>'; } }
        async function goMode() { if (!currentLatLng || !destinationMarker) { alert("Set start and destination"); return; } document.getElementById('nextTurn').classList.remove('hidden'); const start = currentLatLng, end = destinationMarker.getLatLng(); const mode = document.getElementById('routeMode').value; const url = `https://router.project-osrm.org/route/v1/${mode}/${start[1]},${start[0]};${end.lng},${end.lat}?overview=full&geometries=geojson&alternatives=true`; const res = await fetch(url); const data = await res.json(); if (data.routes && data.routes.length > 0) { routeCoords = data.routes[0].geometry.coordinates.map(c => [c[1], c[0]]); const dist = (data.routes[0].distance / 1000).toFixed(2); const time = Math.round(data.routes[0].duration / 60); document.getElementById('routeInfo').innerText = `Distance: ${dist} km | ETA: ${time} min`; const steps = data.routes[0].legs[0].steps || []; let dirText = ''; steps.forEach((step, i) => { dirText += `${i + 1}. ${step.maneuver.instruction || 'Proceed'}\n`; }); document.getElementById('directions').innerText = dirText; if (animatedPolyline) map.removeLayer(animatedPolyline); animatedPolyline = L.polyline(routeCoords, { color: '#ff0000', weight: 5 }).addTo(map); map.fitBounds(animatedPolyline.getBounds()); animateVehicle(routeCoords); updateNextTurn(steps); } }
        function animateVehicle(coords) { if (movingVehicle) map.removeLayer(movingVehicle); let i = 0; movingVehicle = L.marker(coords[0], { icon: L.icon({ iconUrl: 'https://cdn-icons-png.flaticon.com/512/252/252025.png', iconSize: [30, 30] }) }).addTo(map); const interval = setInterval(() => { if (i >= coords.length) { clearInterval(interval); return; } movingVehicle.setLatLng(coords[i]); i++; }, 50); }
        function updateNextTurn(steps) { let idx = 0; const turnPanel = document.getElementById('nextTurn'); const interval = setInterval(() => { if (idx >= steps.length) { clearInterval(interval); turnPanel.innerText = "Navigation complete"; return; } turnPanel.innerText = `Next: ${steps[idx].maneuver.instruction || 'Proceed'}`; idx++; }, 3000); }
    </script>
</body>

</html>